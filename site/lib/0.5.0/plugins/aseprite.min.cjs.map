{
  "version": 3,
  "sources": ["../../src/plugins/aseprite.ts"],
  "sourcesContent": ["// load aseprite spritesheet\n\nmodule.exports = (k) => {\n\nfunction loadAseprite(name, imgSrc, jsonSrc) {\n\n\treturn new Promise((resolve, reject) => {\n\n\t\t\tconst jsonPath = k.loadRoot() + jsonSrc;\n\t\t\tconst loader = k.newLoader();\n\n\t\t\tk.loadSprite(name, imgSrc).then((sprite) => {\n\n\t\t\t\tfetch(jsonPath)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\treturn res.json();\n\t\t\t\t\t})\n\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\tconst size = data.meta.size;\n\t\t\t\t\t\tsprite.frames = data.frames.map((f) => {\n\t\t\t\t\t\t\treturn k.quad(\n\t\t\t\t\t\t\t\tf.frame.x / size.w,\n\t\t\t\t\t\t\t\tf.frame.y / size.h,\n\t\t\t\t\t\t\t\tf.frame.w / size.w,\n\t\t\t\t\t\t\t\tf.frame.h / size.h,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor (const anim of data.meta.frameTags) {\n\t\t\t\t\t\t\tsprite.anims[anim.name] = [anim.from, anim.to];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(sprite);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\terror(`failed to load ${jsonPath}`);\n\t\t\t\t\t\treject();\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tloader.done();\n\t\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n}\n\nreturn {\n\tloadAseprite,\n};\n\n};\n"],
  "mappings": "AAEA,OAAO,QAAU,AAAC,GAAM,CAExB,WAAsB,EAAM,EAAQ,EAAS,CAE5C,MAAO,IAAI,SAAQ,CAAC,EAAS,IAAW,CAEtC,GAAM,GAAW,EAAE,WAAa,EAC1B,EAAS,EAAE,YAEjB,EAAE,WAAW,EAAM,GAAQ,KAAK,AAAC,GAAW,CAE3C,MAAM,GACJ,KAAK,AAAC,GACC,EAAI,QAEX,KAAK,AAAC,GAAS,CACf,GAAM,GAAO,EAAK,KAAK,KACvB,EAAO,OAAS,EAAK,OAAO,IAAI,AAAC,GACzB,EAAE,KACR,EAAE,MAAM,EAAI,EAAK,EACjB,EAAE,MAAM,EAAI,EAAK,EACjB,EAAE,MAAM,EAAI,EAAK,EACjB,EAAE,MAAM,EAAI,EAAK,IAGnB,OAAW,KAAQ,GAAK,KAAK,UAC5B,EAAO,MAAM,EAAK,MAAQ,CAAC,EAAK,KAAM,EAAK,IAE5C,EAAQ,KAER,MAAM,IAAM,CACZ,MAAM,kBAAkB,KACxB,MAEA,QAAQ,IAAM,CACd,EAAO,aASb,MAAO,CACN",
  "names": []
}
